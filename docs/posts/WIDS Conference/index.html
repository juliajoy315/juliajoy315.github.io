<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.549">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Julia Joy">
<meta name="dcterms.date" content="2024-03-04">
<meta name="description" content="Blog Post 3: Refelcting on and contextualizing the learning obtained from the Women in Data Science Conference">

<title>My Awesome CSCI 0451 Blog - WiDS Conference at Middlebury College</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<style>

      .quarto-title-block .quarto-title-banner h1,
      .quarto-title-block .quarto-title-banner h2,
      .quarto-title-block .quarto-title-banner h3,
      .quarto-title-block .quarto-title-banner h4,
      .quarto-title-block .quarto-title-banner h5,
      .quarto-title-block .quarto-title-banner h6
      {
        color: white;
      }

      .quarto-title-block .quarto-title-banner {
        color: white;
background-image: url(../../img/landscape.png);
background-size: cover;
      }
</style>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">My Awesome CSCI 0451 Blog</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html"> 
<span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com"> <i class="bi bi-twitter" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">WiDS Conference at Middlebury College</h1>
                  <div>
        <div class="description">
          Blog Post 3: Refelcting on and contextualizing the learning obtained from the Women in Data Science Conference
        </div>
      </div>
                </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Julia Joy </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">March 4, 2024</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">





<section id="abstract" class="level3">
<h3 class="anchored" data-anchor-id="abstract">Abstract:</h3>
<p>In this blog post, I reflect on my experiences reading ‘Solving the Equation: The Variables for Women’s Success in Engineering and Computing’ by Corbett and Hill (2015) and attending the Women in Data Science conference. Through the two of these experiences, I gained valuable insights into the challenges and potential solutions surrounding gender diversity in STEM fields. I learned about the systemic barriers that hinder women’s ability to enter, continue, and succeed in engineering and computing, that highlight the importance of proactive strategies to equalize representation of women in STEM. This blog post outlines these learnings by reflecting on questions from ‘Solving the Equation: The Variables for Women’s Success in Engineering and Computing’ as well as summarizing the speakers from the Women in Data Science conference.</p>
</section>
<section id="part-1-why-spotlight-women-in-data-science" class="level2">
<h2 class="anchored" data-anchor-id="part-1-why-spotlight-women-in-data-science">Part 1: Why Spotlight Women in Data Science?</h2>
<p>In ‘Solving the Equation: The Variables for Women’s Success in Engineering and Computing’ by Corbett and Hill (2015), the authors show that women are underrepresented in computing, math, and engineering. But why is it a problem? And for whom is it a problem?</p>
<p>This underrepresentation of women significant challenges on multiple fronts. This underrepresentation reflects systemic inequalities and biases that have been shown to hinder equal opportunities for women in these fields. By not teaching everyone that women can hold their own and be equally as good in STEM fields as men, women lose out on these high-quality job opportunities. This is not just a problem for women. By a lack of women in computing, math, and engineering, it not only deprives women of potential career paths, but it also limits the diversity of perspectives and talents that are crucial for solving problems, developing rounded mechanisms, and field innovation. As Corbet and Hill said, “The United States simply can’t afford to ignore the perspectives of half the population in future engineering and technical designs”. Gender biases that contribute to the underrepresentation of women in computing, math, and engineering also create obstacles for the men who work alongside women in these industries. Studies point to a devaluation of work when men work with women (West et al., 2012), which can lead to men traking steps to avoid wokring with women, worsening the challenges facing women in male-dominated fields and contributing to the problem. Everyone must work together to help balance the gender representation in computing, math, and engineering, as it is a problem that affects us all no matter our identity.</p>
<section id="which-of-the-barriers-and-unequal-challenges-described-in-the-section-why-so-few-can-be-eroded-by-events-that-spotlight-the-achievement-of-women-in-stem" class="level3">
<h3 class="anchored" data-anchor-id="which-of-the-barriers-and-unequal-challenges-described-in-the-section-why-so-few-can-be-eroded-by-events-that-spotlight-the-achievement-of-women-in-stem">Which of the barriers and unequal challenges described in the section “Why So Few?” can be eroded by events that spotlight the achievement of women in STEM?</h3>
<p>The section “Why so Few?” outlines various barriers and unequal challenges women face in the STEM field, such as sense of belonging, stereotypes and stereotype threat, challenging academic workspaces, as well as isolation. Women may face negative impacts such as experiencing difficultly balancing expected gendered home responsibilities and the culture of overwork, feel de-incentivized by the engineering culture of disengagement as studies show women are more likely than men to express a preference for work with a clear social purpose (Konrad et al., 2000), or feel isolated as significant portion of women reported feeling as if they lacked role models and mentors and did not agree with the statement that “it is safe to speak up most of the time”. While not all of these barriers or challenges can be eroded by events that spotlight the achievement of women in STEM, there are a few that can benefit from these events. What stood out most notably to me that could be benefited by these events was improving the sense of belonging for women in STEM. Events that spotlight the achievement of women in STEM can help increase the sense of belonging for women in STEM, and can have a positive domino-effect in doing so. Events that spotlight the achievement of women in STEM shows examples of women in a historically male-dominated field, helping combat both internalized and external stereotypes. These events show women that success in STEM is possible, providing role models and mentors, which was also noted as a problem for women in the industry. Achievement spotlight events are thus crucial for increasing women’s sense of belonging and increasing the number of women in STEM.</p>
</section>
<section id="part-2-attending-the-women-in-data-science-conference.-yay" class="level3">
<h3 class="anchored" data-anchor-id="part-2-attending-the-women-in-data-science-conference.-yay">Part 2: Attending the Women in Data Science Conference. Yay!</h3>
<p>By attending the Women in Data Science Conference, I had an unique opportunity to engage with and hear from real professional women that have succeeded against all of the challenges in a male-dominated field, learning about their work as well as their experiences.</p>
</section>
</section>
<section id="lightning-talk-1-is-the-united-nations-security-council-a-democratic-institution-musings-and-measures-of-representation-by-professor-amy-yuen" class="level1">
<h1>Lightning Talk 1: Is the United Nations Security Council a Democratic Institution? Musings and Measures of Representation by Professor Amy Yuen</h1>
<p>In the first lightning talk, Professor Amy Yuen, a professor of political science at Middlebury College, spoke about whether or not the United Nations Security Council is a Democratic Institution, and the challenges and thought put into measuring representation on the council. In order to get the audience to understand the goals of her study, Professor Yuen went into the structure and systems of the UN security council. The UN security council has 15 members, 5 of which are permanent and hold vetoing power, while the other 10 are alternating elected countries with no veto power. In order to understand if the United Nations Security Council is a democratic institution, it must hold some of the qualities of a democratic institution, such as representation. Who engages in the council? Whose issues get attention? In order to determine this through a data science route, measurements of resolutions, formal meetings and consultations, presidential statements..etc, were needed. It was found that the topic of sponsorship brought up discussions, as data showed that while permanent members brought up most of the discussed issues, the sitting elected members brought up a considerable chunk. How did the sitting elected members get to be on the council? Who serves more frequently and how long do elected members serve for? By employing data science methods, Professor Yuen was able to determine and visualize what the optimal inclusive representation of countries in the UN security council would look like. Plotted against the reality of the UN security council’s history of elected members, it was found that it was pretty close to the inclusive line, indicating that at least the UN does succeed in the aspect of representation in the question of whether or not the United Nations Security Council is a Democratic Institution.</p>
<p>I had not previously known that much about the United Nations Security Council, so I found Professor Yuen’s talk to be quite informative both on the system of the security council, and on the process of which to determine whether an institution can be considered democractic or not.</p>
</section>
<section id="lightning-talk-2-beyond-deforestation-monitoring-change-in-tropical-forest-landscapes-by-professor-jessica-lroe" class="level1">
<h1>Lightning Talk 2: Beyond Deforestation: Monitoring Change in Tropical Forest Landscapes by Professor Jessica L’Roe</h1>
<p>Professor Jessica L’Roe of the geography department at Middlebury College spoke about her study monitoring change in the tropical forest landscapes across the globe. Researching in Brazil, Peru, as well as Uganda, her research had themes of livelihoods, wellbeing, and land use in conservation hotspots. Using property parsal data and remote sensing of deforestation, Professor L’Roe and her team discovered that land registration in the region of the Amazon Rainforest in Brazil indicated that people would round down the classification of their land to be “smallholders” in order to avoid responsibility for deforestation. In Uganda, professor L’Roe monitored landscape changes around Kibale National Park, noting that the population of smallholders farms were increasing but rather than increasing food production, there were more trees being planted. Using brute force census, L’Roe and her team collected information on who is planting these trees and why they are planting them. Professor L’Roe wrapped up her talk by a reflection on a related problem of increasing land competition for local youth as they grow up, finding that Ugandian mothers were incresingly investing in education instead of land, because it was the safer bet for their children’s futures, and especially for their daughters futures.</p>
<p>Professor L’Roe’s talk was informative in areas in which I have not really ever studied. I learned about how deforestation can be a systemic issue, the importance of and possibility of local accounts being treated as data points, and I learned that important information can still be collected via a brute force census method. I also enjoyed the professors emphasis on letting go of gender expectations when considering career paths!</p>
</section>
<section id="lightning-talk-3-computational-linguistic-models-of-mental-health-by-professor-laura-biester" class="level1">
<h1>Lightning Talk 3: Computational Linguistic Models of Mental Health By Professor Laura Biester</h1>
<p>The third lightning talk was given by a current professor of mine, Professor Laura Biester of the Computer Science department at Middlebury College. I found her study of computational linguistic models of mental health to be quite interesting, as it employed methods that we have been studying in class. Professor Biester’s study aimed to study the connection between language and mental health, furthering a field that has utilized computers since 1980 to analyze language for mental health classification. This study found difficulty with access to high quality data, as it needed to find a way to use publicly available data that often relied on self-reports of depression diagnoses. In order to obtain this specific data for the study, Professor Biester scraped Reddit, narrowing down 360 json files to obtain usernames for people who had self-reported and the posts in which they did the self-reporting, as well as posts from control users who had never self-reported and thus assumed to not have a depression diagnosis. A dataset for test generalization was obtained from surveying University of Michigan students. Utilizing natural language processing techniques of TF-IDF and logistic regression, Professor Biester classifed with a linear model, then used mentalBERT to extract contextual representations of the words. The studys results found that a pre-diagnosis model did well when compared to an all-emcompassing model, the model weights for pre-diagnosis models corresponding more to symptoms while the all-encompassing model corresponded more to mental health discussion. This study emphasized the important of data collection in data science.</p>
<p>Professor Biester had mentioned her study in passing in class before, but during WiDS she delved more into the practices in which she employed this study, it was interesting to learn how the methods she teaches us in class could be used on a real world study.</p>
</section>
<section id="keynote-data-science-skills-in-unexpected-places-by-professor-sarah-brown" class="level1">
<h1>Keynote: Data Science Skills in Unexpected Places by Professor Sarah Brown</h1>
<p>The Keynote speaker was Professor Sarah Brown, a computer science professor and director of machine learning at the University of Rhode Island. Professor Brown’s talk was focused on data science skills in unexpected places as well as focusing on potential ways to make machine learning more fair. Brown offered the idea of thinking of data science as a venn diagram intersection of computer science, statististics, and domain expertise. However she emphasized that domain expertise shifts, and the degree to which and content of which can vastly differ from one data science problem to another. She came to the idea of a data science “toolbox”, with domain expertise being almost as a tool in ones toolbox approaching a problem, and an emphasis on the use of these tools to make machine learning more fair.</p>
<p>Walking through 3 significant events in her life, Brown showed how each event led to a discovery of key factors she called “keys” to data science. The first key was the importance of data’s context, which occurred to her when implementing a data science study about post-tramatic-stress-disorder (PTSD) in grad school. The second key was that disciplines are communities, that that sometimes in order to get the last bit of crucial missing information, all one needed to do was to ask people. The third key was found as Professor Brown was a national leader in the National Society of Black Engineers. By realizing that national level, regional level, and local level chapters of the NSBE all had different expectations and needs, she realized the third key- that one needs to meet people where they are. Brown raised the example that biased models are still making it out into the world because of the “high accuracy levels”, but that these problematic models, by perpetuating biases, are not meeting people where they are. Through these events and realization of keys, Professor Brown was able to learn about and improve her data science in unexpected places. The talk concluded with remarks about how model predictions may not always be right, and how there will always be a tradeoff within the three statistical measures of fairness as it is currently impossible to perfectly have all three.</p>
<section id="reflection" class="level3">
<h3 class="anchored" data-anchor-id="reflection">Reflection:</h3>
<p>Attending the Women in Data Science conference and reading ‘Solving the Equation: The Variables for Women’s Success in Engineering and Computing’ by Corbett and Hill (2015) have given me valuable insights into the multifaceted challenges and potential solutions surrounding gender diversity in STEM fields. There exist systemic barriers that hinder women’s ability to enter as well as continue and succeed in the fields of engineering and computing. Attending the Women in Data Science conference was an unique opportunity to engage with and hear from real professional women that have succeeded against all of the challenges in a male-dominated field. Their studies and stories served as tangible examples of how women can overcome obstacles and thrive in STEM careers. From their talks I have learned that data science isn’t always about modeling, but about the importance of quality data and data collection too. I have learned to meet people where they are, to treat the advice of those with domain expertise as tools, and to listen to locals/those with hands on experience about data I work with. I have learned about all the different forms and disciplines data science can be and take on. I hope to continue to learn from extraordinary women in STEM and follow in their footsteps.</p>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>